machine:
  pre:
    - rm -rf /home/ubuntu/virtualenvs/venv-system
    - mkdir -p /home/ubuntu/virtualenvs
    - touch /home/ubuntu/virtualenvs/venv-system
  environment:
    PYENV_VERSION: 3.6.5:2.7.14
    TOXENV: py36,py27
dependencies:
  override:
    - 'cd /opt/circleci/.pyenv && git pull'
    - 'for i in ${PYENV_VERSION//:/ } ; do pyenv install -s $i ; done'
    - pip install -r requirements.txt
test:
  override:
    - tox -v
  post:
    - codecov
